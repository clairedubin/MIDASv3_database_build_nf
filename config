profiles {
  standard {
    process {
        executor = 'sge'
        penv = 'smp'
        maxRetries = 3
        cache = 'lenient'
	      clusterOptions = { " -S /bin/bash -R y -l h_vmem=${task.memory.toString().replaceAll(/[\sB]/,'')}" }

        withLabel: 'mem_very_high' {
          cpus = 16
	        memory = { 8.GB * task.attempt }
          time = '24h'
        }
        withLabel: 'mem_high' {
          cpus = 8
	        memory = { 8.GB * task.attempt }
          time = '24h'      
        }
        withLabel: 'mem_medium' {
          cpus = 4
	        memory = { 8.GB * task.attempt }
          time = '24h'  
        }
        withLabel: 'single_cpu' {
          cpus = 1
	        memory = { 4.GB * task.attempt }
          time = '12h'
          errorStrategy = 'retry'
        }
    } // end process
    apptainer {
      enabled = true
      cacheDir = '/wynton/protected/home/sirota/clairedubin/singularity_image/'
      autoMounts = true
    } // end apptainer
  } // end standard profile
}
